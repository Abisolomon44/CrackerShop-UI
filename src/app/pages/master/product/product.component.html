

  <!-- =========================
       Add New Products Inline (Grid Rows)
  ========================== 
  <div class="input-grid-responsive mb-4">
    <table class="table input-grid table-bordered table-hover">
      <thead class="table-light">
        <tr>
          <th>#</th>
          <th>Company</th>
          <th>Product Name</th>
          <th>Code</th>
          <th>Category</th>
          <th>SubCategory</th>
          <th>Brand</th>
          <th>Unit</th>
          <th>HSN</th>
          <th>Purchase</th>
          <th>Retail</th>
          <th>Wholesale</th>
          <th>Sale</th>
          <th>MRP</th>
          <th>Discount</th>
          <th>Stock</th>
          <th>Status</th>
          <th class="text-center">Action</th>
        </tr>
      </thead>
      <tbody>
       
        <tr *ngFor="let p of newProducts; let i = index">
          <td>New</td>
          <td>
            <select class="form-select form-select-sm" [(ngModel)]="p.companyID">
              <option [ngValue]="0">--Select--</option>
              <option *ngFor="let c of companies" [ngValue]="c.companyID">{{ c.companyName }}</option>
            </select>
          </td>
          <td><input type="text" class="form-control form-control-sm" [(ngModel)]="p.productName" /></td>
          <td><input type="text" class="form-control form-control-sm" [(ngModel)]="p.productCode" readonly /></td>
          <td>
            <select class="form-select form-select-sm" [(ngModel)]="p.categoryID">
              <option [ngValue]="0">--Select--</option>
              <option *ngFor="let c of categories" [ngValue]="c.categoryID">{{ c.categoryName }}</option>
            </select>
          </td>
          <td>
            <select class="form-select form-select-sm" [(ngModel)]="p.subCategoryID">
              <option [ngValue]="0">--Select--</option>
              <option *ngFor="let sc of subCategories" [ngValue]="sc.subCategoryID">{{ sc.subCategoryName }}</option>
            </select>
          </td>
          <td>
            <select class="form-select form-select-sm" [(ngModel)]="p.brandID">
              <option [ngValue]="0">--Select--</option>
              <option *ngFor="let b of brands" [ngValue]="b.brandID">{{ b.brandName }}</option>
            </select>
          </td>
          <td>
            <select class="form-select form-select-sm" [(ngModel)]="p.unitID">
              <option [ngValue]="0">--Select--</option>
              <option *ngFor="let u of units" [ngValue]="u.unitID">{{ u.unitName }}</option>
            </select>
          </td>
          <td>
            <select class="form-select form-select-sm" [(ngModel)]="p.hsnid">
              <option [ngValue]="0">--Select--</option>
              <option *ngFor="let h of hsnCodes" [ngValue]="h.hsnid">{{ h.hsnCode }}</option>
            </select>
          </td>
          <td><input type="number" class="form-control form-control-sm" [(ngModel)]="p.purchaseRate" /></td>
          <td><input type="number" class="form-control form-control-sm" [(ngModel)]="p.retailPrice" /></td>
          <td><input type="number" class="form-control form-control-sm" [(ngModel)]="p.wholesalePrice" /></td>
          <td><input type="number" class="form-control form-control-sm" [(ngModel)]="p.saleRate" /></td>
          <td><input type="number" class="form-control form-control-sm" [(ngModel)]="p.mrp" /></td>
          <td><input type="number" class="form-control form-control-sm" [(ngModel)]="p.discountAmount" /></td>
          <td><input type="number" class="form-control form-control-sm" [(ngModel)]="p.currentStock" /></td>
          <td>
            <select class="form-select form-select-sm" [(ngModel)]="p.isActive">
              <option [ngValue]="true">Active</option>
              <option [ngValue]="false">Inactive</option>
            </select>
          </td>
          <td class="text-center">
            <button class="btn btn-sm btn-success" (click)="saveOrUpdateProduct(p)">Save</button>
            <button class="btn btn-sm btn-danger ms-1" (click)="removeNewRow(i)">Remove</button>
          </td>
        </tr>

        <tr *ngIf="newProducts.length === 0">
          <td colspan="18" class="text-center text-muted">Click "+ Add Row" to add a new product.</td>
        </tr>
      </tbody>
    </table>
  </div>


  <div class="product-list-container mt-4">
    <h4>Existing Products</h4>
    <div class="input-grid-responsive">
      <table class="table input-grid table-bordered table-hover">
        <thead class="table-light">
          <tr>
            <th>#</th>
            <th>Company</th>
            <th>Product Name</th>
            <th>Code</th>
            <th>Category</th>
            <th>SubCategory</th>
            <th>Brand</th>
            <th>Unit</th>
            <th>HSN</th>
            <th>Purchase</th>
            <th>Retail</th>
            <th>Wholesale</th>
            <th>Sale</th>
            <th>MRP</th>
            <th>Discount</th>
            <th>Stock</th>
            <th>Status</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of products; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ getCompanyName(p.companyID) }}</td>
            <td>{{ p.productName }}</td>
            <td>{{ p.productCode }}</td>
            <td>{{ getCategoryName(p.categoryID) }}</td>
            <td>{{ getSubCategoryName(p.subCategoryID) }}</td>
            <td>{{ getBrandName(p.brandID) }}</td>
            <td>{{ getUnitName(p.unitID) }}</td>
            <td>{{ getHSNCode(p.hsnid) }}</td>
            <td>{{ p.purchaseRate | number:'1.2-2' }}</td>
            <td>{{ p.retailPrice | number:'1.2-2' }}</td>
            <td>{{ p.wholesalePrice | number:'1.2-2' }}</td>
            <td>{{ p.saleRate | number:'1.2-2' }}</td>
            <td>{{ p.mrp | number:'1.2-2' }}</td>
            <td>{{ p.discountAmount | number:'1.2-2' }}</td>
            <td>{{ p.currentStock }}</td>
            <td>{{ p.isActive ? 'Active' : 'Inactive' }}</td>
            <td class="text-center">
              <button class="btn btn-sm btn-warning me-1" (click)="editProduct(p)">Edit</button>
              <button class="btn btn-sm btn-danger" (click)="deleteProduct(p)">Delete</button>
            </td>
          </tr>

          <tr *ngIf="products.length === 0">
            <td colspan="18" class="text-center text-muted">No products available.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
-->

<div class="container mt-4">
  <h4>Product Master</h4>
  <app-input-data-grid
    [columns]="columns"
    [data]="products"
    (cellValueChanged)="onCellValueChanged($event)"
    (rowAdded)="onRowAdded($event)"
  >
  </app-input-data-grid>
</div>
