<div class="container mt-5">

  <div class="row g-4">
    <!-- Department Form -->
    <div class="col-lg-4 col-md-5">
      <div class="form-container">
  <h2 class="mb-4 text-primary fw-bold text-center">Department Master</h2>

        <form (ngSubmit)="saveDepartment()">

          <!-- Branch -->
          <div class="form-column mb-3">
            <label>Branch</label>
            <select [(ngModel)]="department.branchID" name="branchID" class="form-select" required>
              <option value="" disabled>Select Branch</option>
              <option *ngFor="let branch of branches" [value]="branch.branchID">{{ branch.branchName }}</option>
            </select>
          </div>

          <!-- Department Code
          <div class="form-column mb-3">
            <label>Department Code</label>
            <input type="text" [(ngModel)]="department.departmentCode" name="departmentCode" class="form-control" required>
          </div> -->

          <!-- Department Name -->
          <div class="form-column mb-3">
            <label>Department Name</label>
            <input type="text" [(ngModel)]="department.departmentName" name="departmentName" class="form-control" required>
          </div>

          <!-- Active Checkbox -->
          <div class="form-column mb-3 checkbox-column">
            <label>
              <input type="checkbox" [(ngModel)]="department.isActive" name="isActive"> Active
            </label>
          </div>

          <!-- Buttons -->
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">
              {{ department.departmentID ? 'Update' : 'Save' }}
            </button>
            <button type="button" class="btn btn-outline" (click)="cancelEdit()">Cancel</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Department Table -->
    <div class="col-lg-8 col-md-7">
      <div class="form-container">
        <h5 class="mb-3 text-secondary">Department List</h5>
        <div class="table-responsive">
          <table class="table-common align-middle">
            <thead>
              <tr>
                <th>ID</th>
                <th>Branch</th>
                <th>Code</th>
                <th>Name</th>
                <th>Active</th>
                <th class="text-center">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let dept of departments">
                <td>{{ dept.departmentID }}</td>
                <td>{{ getBranchName(dept.branchID) }}</td>
                <td>{{ dept.departmentCode }}</td>
                <td>{{ dept.departmentName }}</td>
                <td>
                  <span class="badge" [ngClass]="dept.isActive ? 'bg-success' : 'bg-danger'">
                    {{ dept.isActive ? 'Yes' : 'No' }}
                  </span>
                </td>
                <td class="text-center">
                  <button class="btn btn-sm btn-outline-warning me-1" (click)="editDepartment(dept)" title="Edit">
                    <i class="bi bi-pencil-fill"></i>
                  </button>
                  <button class="btn btn-sm btn-outline-danger" (click)="deleteDepartment(dept.departmentID)" title="Delete">
                    <i class="bi bi-trash-fill"></i>
                  </button>
                </td>
              </tr>
              <tr *ngIf="departments.length === 0">
                <td colspan="6" class="text-center text-muted">No departments found.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
