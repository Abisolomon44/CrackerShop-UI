<div class="layout-content p-4">

  <h2 class="mb-4 text-primary text-center">User / Role Modules</h2>

  <!-- Role & User Selection -->
  <div class="row g-3 mb-4">
    <div class="col-md-6">
      <label class="form-label fw-semibold">Select Role</label>
      <select
        class="form-select"
        [(ngModel)]="selectedRoleId"
      >
        <option [ngValue]="undefined">-- Select Role --</option>
        <option *ngFor="let role of roles" [value]="role.roleID">{{ role.roleName }}</option>
      </select>
    </div>

    <div class="col-md-6">
      <label class="form-label fw-semibold">Select User</label>
      <select
        class="form-select"
        [(ngModel)]="selectedUserId"
      >
        <option [ngValue]="undefined">-- Select User --</option>
        <option *ngFor="let user of users" [value]="user.userID">{{ user.userName }}</option>
      </select>
    </div>
  </div>

  <!-- Module List with Checkboxes -->
  <div class="card shadow-sm">
    <div class="card-header bg-light fw-semibold">Modules</div>
    <ul class="list-group list-group-flush">
      <li
        *ngFor="let module of modules"
        class="list-group-item d-flex align-items-center justify-content-between"
      >
        <div class="form-check d-flex align-items-center gap-2">
          <input
            type="checkbox"
            class="form-check-input"
            [(ngModel)]="selectedModulesMap[module.moduleID]"
            id="moduleCheck{{ module.moduleID }}"
          />
          <label class="form-check-label" for="moduleCheck{{ module.moduleID }}">
            {{ module.label }}
          </label>
        </div>
      </li>
    </ul>
  </div>

  <!-- Save All Button -->
  <div class="d-flex justify-content-end mt-3">
    <button
      class="btn btn-primary"
      (click)="saveAllSelectedModules()"
    >
      Save Selected Modules
    </button>
  </div>

</div>
